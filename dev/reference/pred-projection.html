<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><!-- upstream: inst/BS5/templates/head.html; pkgdown-version: 2.1.3, fe04924 --><!-- https://github.com/r-lib/pkgdown/tree/fe04924b3df129bea60ac871614b01d87bcae147 --><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Predictions from a submodel (after projection) — pred-projection • projpred</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><!-- mathjax math --><script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script><script>
  window.MathJax = {
    chtml: {
      fontURL: "https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/output/chtml/fonts/woff-v2"
    }
  };
</script><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_3-0.4.10/font.css" rel="stylesheet"><link href="../deps/Source_Code_Pro-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- Font Awesome 7.0.1 for Bluesky icon --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css" referrerpolicy="no-referrer"><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Predictions from a submodel (after projection) — pred-projection"><meta name="description" content="After the projection of the reference model onto a submodel, the linear
predictors (for the original or a new dataset) based on that submodel can be
calculated by proj_linpred(). These linear predictors can also be
transformed to response scale and averaged across the projected parameter
draws. Furthermore, proj_linpred() returns the corresponding log predictive
density values if the (original or new) dataset contains response values. The
proj_predict() function draws from the predictive distributions (there is
one such distribution for each observation from the original or new dataset)
of the submodel that the reference model has been projected onto. If the
projection has not been performed yet, both functions call project()
internally to perform the projection. Both functions can also handle multiple
submodels at once (for objects of class vsel or objects returned by a
project() call to an object of class vsel; see project())."><meta property="og:description" content="After the projection of the reference model onto a submodel, the linear
predictors (for the original or a new dataset) based on that submodel can be
calculated by proj_linpred(). These linear predictors can also be
transformed to response scale and averaged across the projected parameter
draws. Furthermore, proj_linpred() returns the corresponding log predictive
density values if the (original or new) dataset contains response values. The
proj_predict() function draws from the predictive distributions (there is
one such distribution for each observation from the original or new dataset)
of the submodel that the reference model has been projected onto. If the
projection has not been performed yet, both functions call project()
internally to perform the projection. Both functions can also handle multiple
submodels at once (for objects of class vsel or objects returned by a
project() call to an object of class vsel; see project())."><meta property="og:image" content="https://mc-stan.org/projpred/logo.svg"><meta name="robots" content="noindex"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <!-- upstream: inst/BS5/templates/navbar.html; pkgdown-version: 2.1.3, fe04924 -->
<!-- https://github.com/r-lib/pkgdown/tree/fe04924b3df129bea60ac871614b01d87bcae147 -->
<nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">


    <a class="navbar-brand me-2" href="../index.html">
      <!-- Add Stan logo -->
      <picture><source type="image/svg+xml" srcset="../logo.svg"><img src="../logo.png" class="stan-logo" alt="Stan blue hex logo"></source></picture>
      projpred
    </a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">2.9.1.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../index.html" aria-label="Go to homepage"><span class="fa fa-home fa-lg"></span></a></li>
<li class="nav-item"><a class="nav-link" href="../articles/index.html">Vignettes</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Functions</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-other-packages" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Other Packages</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-other-packages"><li><a class="external-link dropdown-item" href="https://mc-stan.org/bayesplot">bayesplot</a></li>
    <li><a class="external-link dropdown-item" href="https://mc-stan.org/cmdstanr">cmdstanr</a></li>
    <li><a class="external-link dropdown-item" href="https://mc-stan.org/loo">loo</a></li>
    <li><a class="external-link dropdown-item" href="https://mc-stan.org/posterior">posterior</a></li>
    <li><a class="external-link dropdown-item" href="https://mc-stan.org/rstan">rstan</a></li>
    <li><a class="external-link dropdown-item" href="https://mc-stan.org/rstanarm">rstanarm</a></li>
    <li><a class="external-link dropdown-item" href="https://mc-stan.org/rstantools">rstantools</a></li>
    <li><a class="external-link dropdown-item" href="https://mc-stan.org/shinystan">shinystan</a></li>
  </ul></li>
<li class="nav-item"><a class="external-link nav-link" href="https://mc-stan.org/about/">About Stan</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://bsky.app/profile/did:plc:qznndgdnkem2yryu7ipqbpv7" aria-label="Visit our Bluesky profile"><span class="fa fa-brands fa-bluesky"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://discourse.mc-stan.org/" aria-label="Visit our forums"><span class="fa fa-users"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/stan-dev/projpred/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Predictions from a submodel (after projection)</h1>
      <small class="dont-index">Source: <a href="https://github.com/stan-dev/projpred/blob/master/R/methods.R" class="external-link"><code>R/methods.R</code></a></small>
      <div class="d-none name"><code>pred-projection.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>After the projection of the reference model onto a submodel, the linear
predictors (for the original or a new dataset) based on that submodel can be
calculated by <code>proj_linpred()</code>. These linear predictors can also be
transformed to response scale and averaged across the projected parameter
draws. Furthermore, <code>proj_linpred()</code> returns the corresponding log predictive
density values if the (original or new) dataset contains response values. The
<code>proj_predict()</code> function draws from the predictive distributions (there is
one such distribution for each observation from the original or new dataset)
of the submodel that the reference model has been projected onto. If the
projection has not been performed yet, both functions call <code><a href="project.html">project()</a></code>
internally to perform the projection. Both functions can also handle multiple
submodels at once (for <code>object</code>s of class <code>vsel</code> or <code>object</code>s returned by a
<code><a href="project.html">project()</a></code> call to an object of class <code>vsel</code>; see <code><a href="project.html">project()</a></code>).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">proj_linpred</span><span class="op">(</span></span>
<span>  <span class="va">object</span>,</span>
<span>  newdata <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  offsetnew <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  weightsnew <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  filter_nterms <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  transform <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  integrated <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  allow_nonconst_wdraws_prj <span class="op">=</span> <span class="va">return_draws_matrix</span>,</span>
<span>  return_draws_matrix <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  .seed <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">proj_predict</span><span class="op">(</span></span>
<span>  <span class="va">object</span>,</span>
<span>  newdata <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  offsetnew <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  weightsnew <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  filter_nterms <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  nresample_clusters <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  return_draws_matrix <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  .seed <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  resp_oscale <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-object">object<a class="anchor" aria-label="anchor" href="#arg-object"></a></dt>
<dd><p>An object returned by <code><a href="project.html">project()</a></code> or an object that can be
passed to argument <code>object</code> of <code><a href="project.html">project()</a></code>.</p></dd>


<dt id="arg-newdata">newdata<a class="anchor" aria-label="anchor" href="#arg-newdata"></a></dt>
<dd><p>Passed to argument <code>newdata</code> of the reference model's
<code>extract_model_data</code> function (see <code><a href="refmodel-init-get.html">init_refmodel()</a></code>). Provides the
predictor (and possibly also the response) data for the new (or old)
observations. May also be <code>NULL</code> for using the original dataset. If not
<code>NULL</code>, any <code>NA</code>s will trigger an error.</p></dd>


<dt id="arg-offsetnew">offsetnew<a class="anchor" aria-label="anchor" href="#arg-offsetnew"></a></dt>
<dd><p>Passed to argument <code>orhs</code> of the reference model's
<code>extract_model_data</code> function (see <code><a href="refmodel-init-get.html">init_refmodel()</a></code>). Used to get the
offsets for the new (or old) observations.</p></dd>


<dt id="arg-weightsnew">weightsnew<a class="anchor" aria-label="anchor" href="#arg-weightsnew"></a></dt>
<dd><p>Passed to argument <code>wrhs</code> of the reference model's
<code>extract_model_data</code> function (see <code><a href="refmodel-init-get.html">init_refmodel()</a></code>). Used to get the
weights for the new (or old) observations.</p></dd>


<dt id="arg-filter-nterms">filter_nterms<a class="anchor" aria-label="anchor" href="#arg-filter-nterms"></a></dt>
<dd><p>Only applies if <code>object</code> is an object returned by
<code><a href="project.html">project()</a></code>. In that case, <code>filter_nterms</code> can be used to filter <code>object</code>
for only those elements (submodels) with a number of predictor terms in
<code>filter_nterms</code>. Therefore, needs to be a numeric vector or <code>NULL</code>. If
<code>NULL</code>, use all submodels.</p></dd>


<dt id="arg-transform">transform<a class="anchor" aria-label="anchor" href="#arg-transform"></a></dt>
<dd><p>For <code>proj_linpred()</code> only. A single logical value indicating
whether the linear predictor should be transformed to response scale using
the inverse-link function (<code>TRUE</code>) or not (<code>FALSE</code>). In case of the latent
projection, argument <code>transform</code> is similar in spirit to argument
<code>resp_oscale</code> from other functions and affects the scale of both output
elements <code>pred</code> and <code>lpd</code> (see sections "Details" and "Value" below).</p></dd>


<dt id="arg-integrated">integrated<a class="anchor" aria-label="anchor" href="#arg-integrated"></a></dt>
<dd><p>For <code>proj_linpred()</code> only. A single logical value
indicating whether the output should be averaged across the projected
posterior draws (<code>TRUE</code>) or not (<code>FALSE</code>).</p></dd>


<dt id="arg-allow-nonconst-wdraws-prj">allow_nonconst_wdraws_prj<a class="anchor" aria-label="anchor" href="#arg-allow-nonconst-wdraws-prj"></a></dt>
<dd><p>Only relevant for <code>proj_linpred()</code> and only
if <code>integrated</code> is <code>FALSE</code>. A single logical value indicating whether to
allow projected draws with different (i.e., nonconstant) weights (<code>TRUE</code>)
or not (<code>FALSE</code>). If <code>return_draws_matrix</code> is <code>TRUE</code>,
<code>allow_nonconst_wdraws_prj</code> is internally set to <code>TRUE</code> as well.
<strong>CAUTION</strong>: Expert use only because if set to <code>TRUE</code>, the weights of the
projected draws are stored in attributes <code>wdraws_prj</code> and handling these
attributes requires special care (e.g., when subsetting the returned
matrices).</p></dd>


<dt id="arg-return-draws-matrix">return_draws_matrix<a class="anchor" aria-label="anchor" href="#arg-return-draws-matrix"></a></dt>
<dd><p>A single logical value indicating whether to
return an object (in case of <code>proj_predict()</code>) or objects (in case of
<code>proj_linpred()</code>) of class <code>draws_matrix</code> (see
<code><a href="https://mc-stan.org/posterior/reference/draws_matrix.html" class="external-link">posterior::draws_matrix()</a></code>). In case of <code>proj_linpred()</code> and projected
draws with nonconstant weights (as well as <code>integrated</code> being <code>FALSE</code>),
<code><a href="https://mc-stan.org/posterior/reference/weight_draws.html" class="external-link">posterior::weight_draws()</a></code> is applied internally.</p></dd>


<dt id="arg--seed">.seed<a class="anchor" aria-label="anchor" href="#arg--seed"></a></dt>
<dd><p>Pseudorandom number generation (PRNG) seed by which the same
results can be obtained again if needed. Passed to argument <code>seed</code> of
<code><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed()</a></code>, but can also be <code>NA</code> to not call <code><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed()</a></code> at all. If not
<code>NA</code>, then the PRNG state is reset (to the state before calling
<code>proj_linpred()</code> or <code>proj_predict()</code>) upon exiting <code>proj_linpred()</code> or
<code>proj_predict()</code>. Here, <code>.seed</code> is used for drawing new group-level effects
in case of a multilevel submodel (however, not yet in case of a GAMM) and
for drawing from the predictive distributions of the submodel(s) in case of
<code>proj_predict()</code>. If a clustered projection was performed, then in
<code>proj_predict()</code>, <code>.seed</code> is also used for drawing from the set of
projected clusters of posterior draws (see argument <code>nresample_clusters</code>).
If <code><a href="project.html">project()</a></code> is called internally with <code>seed = NA</code> (or with <code>seed</code> being
a lazily evaluated expression that uses the PRNG), then <code>.seed</code> also
affects the PRNG usage there.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Arguments passed to <code><a href="project.html">project()</a></code> if <code>object</code> is not already an
object returned by <code><a href="project.html">project()</a></code>.</p></dd>


<dt id="arg-nresample-clusters">nresample_clusters<a class="anchor" aria-label="anchor" href="#arg-nresample-clusters"></a></dt>
<dd><p>For <code>proj_predict()</code> with clustered projection (and
nonconstant weights for the projected draws) only. Number of draws to
return from the predictive distributions of the submodel(s). Not to be
confused with argument <code>nclusters</code> of <code><a href="project.html">project()</a></code>: <code>nresample_clusters</code>
gives the number of draws (<em>with</em> replacement) from the set of clustered
posterior draws after projection (with this set being determined by
argument <code>nclusters</code> of <code><a href="project.html">project()</a></code>).</p></dd>


<dt id="arg-resp-oscale">resp_oscale<a class="anchor" aria-label="anchor" href="#arg-resp-oscale"></a></dt>
<dd><p>Only relevant for the latent projection. A single logical
value indicating whether to draw from the posterior-projection predictive
distributions on the original response scale (<code>TRUE</code>) or on latent scale
(<code>FALSE</code>).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>In the following, \(S_{\mathrm{prj}}\), \(N\),
\(C_{\mathrm{cat}}\), and \(C_{\mathrm{lat}}\) from help
topic <a href="refmodel-init-get.html">refmodel-init-get</a> are used. (For <code>proj_linpred()</code> with <code>integrated = TRUE</code>, we have \(S_{\mathrm{prj}} = 1\).) Furthermore, let
\(C\) denote either \(C_{\mathrm{cat}}\) (if <code>transform = TRUE</code>)
or \(C_{\mathrm{lat}}\) (if <code>transform = FALSE</code>). Then, if the
prediction is done for one submodel only (i.e., <code>length(nterms) == 1 || !is.null(predictor_terms)</code> in the explicit or implicit call to <code><a href="project.html">project()</a></code>,
see argument <code>object</code>):</p><ul><li><p><code>proj_linpred()</code> returns a <code>list</code> with the following elements:</p><ul><li><p>Element <code>pred</code> contains the actual predictions, i.e., the linear
predictors, possibly transformed to response scale (depending on
argument <code>transform</code>).</p></li>
<li><p>Element <code>lpd</code> is non-<code>NULL</code> only if <code>newdata</code> is <code>NULL</code> or if
<code>newdata</code> contains response values in the corresponding column. In that
case, it contains the log predictive density values (conditional on
each of the projected parameter draws if <code>integrated = FALSE</code> and
averaged across the projected parameter draws if <code>integrated = TRUE</code>).</p></li>
</ul><p>In case of (i) the traditional projection, (ii) the latent projection
with <code>transform = FALSE</code>, or (iii) the latent projection with
<code>transform = TRUE</code> and <code>&lt;refmodel&gt;$family$cats</code> (where <code>&lt;refmodel&gt;</code> is
an object resulting from <code><a href="refmodel-init-get.html">init_refmodel()</a></code>; see also
<code><a href="extend_family.html">extend_family()</a></code>'s argument <code>latent_y_unqs</code>) being <code>NULL</code>, both
elements are \(S_{\mathrm{prj}} \times N\) matrices
(converted to a—possibly weighted—<code>draws_matrix</code> if argument
<code>return_draws_matrix</code> is <code>TRUE</code>, see the description of this argument).
In case of (i) the augmented-data projection or (ii) the latent
projection with <code>transform = TRUE</code> and <code>&lt;refmodel&gt;$family$cats</code> being
not <code>NULL</code>, <code>pred</code> is an \(S_{\mathrm{prj}} \times N \times C\) array (if argument <code>return_draws_matrix</code> is <code>TRUE</code>, this array
is "compressed" to an \(S_{\mathrm{prj}} \times (N \cdot C)\) matrix—with the columns consisting of \(C\) blocks of
\(N\) rows—and then converted to a—possibly
weighted—<code>draws_matrix</code>) and <code>lpd</code> is an \(S_{\mathrm{prj}} \times
      N\) matrix (converted to a—possibly
weighted—<code>draws_matrix</code> if argument <code>return_draws_matrix</code> is <code>TRUE</code>).
If <code>return_draws_matrix</code> is <code>FALSE</code> and <code>allow_nonconst_wdraws_prj</code> is
<code>TRUE</code> and <code>integrated</code> is <code>FALSE</code> and the projected draws have
nonconstant weights, then both <code>list</code> elements have the weights of
these draws stored in an attribute <code>wdraws_prj</code>. (If
<code>return_draws_matrix</code>, <code>allow_nonconst_wdraws_prj</code>, and <code>integrated</code>
are all <code>FALSE</code>, then projected draws with nonconstant weights cause an
error.)</p></li>
<li><p><code>proj_predict()</code> returns an \(S_{\mathrm{prj}} \times N\)
matrix of predictions where \(S_{\mathrm{prj}}\) denotes
<code>nresample_clusters</code> in case of clustered projection (or, more generally,
in case of projected draws with nonconstant weights). If argument
<code>return_draws_matrix</code> is <code>TRUE</code>, the returned matrix is converted to a
<code>draws_matrix</code> (see <code><a href="https://mc-stan.org/posterior/reference/draws_matrix.html" class="external-link">posterior::draws_matrix()</a></code>). In case of (i) the
augmented-data projection or (ii) the latent projection with <code>resp_oscale =   TRUE</code> and <code>&lt;refmodel&gt;$family$cats</code> being not <code>NULL</code>, the returned matrix
(or <code>draws_matrix</code>) has an attribute called <code>cats</code> (the character vector of
response categories) and the values of the matrix (or <code>draws_matrix</code>) are
the predicted indices of the response categories (these indices refer to
the order of the response categories from attribute <code>cats</code>).</p></li>
</ul><p>If the prediction is done for more than one submodel, the output from above
is returned for each submodel, giving a named <code>list</code> with one element for
each submodel (the names of this <code>list</code> being the numbers of predictor
terms of the submodels when counting the intercept, too).</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Currently, <code>proj_predict()</code> ignores observation weights that are not
equal to <code>1</code>. A corresponding warning is thrown if this is the case.</p>
<p>In case of the latent projection and <code>transform = FALSE</code>:</p><ul><li><p>Output element <code>pred</code> contains the linear predictors without any
modifications that may be due to the original response distribution (e.g.,
for a <code><a href="https://paulbuerkner.com/brms/reference/brmsfamily.html" class="external-link">brms::cumulative()</a></code> model, the ordered thresholds are not taken into
account).</p></li>
<li><p>Output element <code>lpd</code> contains the <em>latent</em> log predictive density values,
i.e., those corresponding to the latent Gaussian distribution. If <code>newdata</code>
is not <code>NULL</code>, this requires the latent response values to be supplied in a
column called <code>.&lt;response_name&gt;</code> of <code>newdata</code> where <code>&lt;response_name&gt;</code> needs
to be replaced by the name of the original response variable (if
<code>&lt;response_name&gt;</code> contained parentheses, these have been stripped off by
<code><a href="refmodel-init-get.html">init_refmodel()</a></code>; see the left-hand side of <code>formula(&lt;refmodel&gt;)</code>). For
technical reasons, the existence of column <code>&lt;response_name&gt;</code> in <code>newdata</code>
is another requirement (even though <code>.&lt;response_name&gt;</code> is actually used).</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Data:</span></span></span>
<span class="r-in"><span><span class="va">dat_gauss</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>y <span class="op">=</span> <span class="va">df_gaussian</span><span class="op">$</span><span class="va">y</span>, <span class="va">df_gaussian</span><span class="op">$</span><span class="va">x</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># The `stanreg` fit which will be used as the reference model (with small</span></span></span>
<span class="r-in"><span><span class="co"># values for `chains` and `iter`, but only for technical reasons in this</span></span></span>
<span class="r-in"><span><span class="co"># example; this is not recommended in general):</span></span></span>
<span class="r-in"><span><span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu">rstanarm</span><span class="fu">::</span><span class="fu"><a href="https://mc-stan.org/rstanarm/reference/stan_glm.html" class="external-link">stan_glm</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">y</span> <span class="op">~</span> <span class="va">X1</span> <span class="op">+</span> <span class="va">X2</span> <span class="op">+</span> <span class="va">X3</span> <span class="op">+</span> <span class="va">X4</span> <span class="op">+</span> <span class="va">X5</span>, family <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/family.html" class="external-link">gaussian</a></span><span class="op">(</span><span class="op">)</span>, data <span class="op">=</span> <span class="va">dat_gauss</span>,</span></span>
<span class="r-in"><span>  QR <span class="op">=</span> <span class="cn">TRUE</span>, chains <span class="op">=</span> <span class="fl">2</span>, iter <span class="op">=</span> <span class="fl">500</span>, refresh <span class="op">=</span> <span class="fl">0</span>, seed <span class="op">=</span> <span class="fl">9876</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Projection onto an arbitrary combination of predictor terms (with a small</span></span></span>
<span class="r-in"><span><span class="co"># value for `ndraws`, but only for the sake of speed in this example; this</span></span></span>
<span class="r-in"><span><span class="co"># is not recommended in general):</span></span></span>
<span class="r-in"><span><span class="va">prj</span> <span class="op">&lt;-</span> <span class="fu"><a href="project.html">project</a></span><span class="op">(</span><span class="va">fit</span>, predictor_terms <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"X1"</span>, <span class="st">"X3"</span>, <span class="st">"X5"</span><span class="op">)</span>, ndraws <span class="op">=</span> <span class="fl">21</span>,</span></span>
<span class="r-in"><span>               seed <span class="op">=</span> <span class="fl">9182</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Predictions (at the training points) from the submodel onto which the</span></span></span>
<span class="r-in"><span><span class="co"># reference model was projected:</span></span></span>
<span class="r-in"><span><span class="va">prjl</span> <span class="op">&lt;-</span> <span class="fu">proj_linpred</span><span class="op">(</span><span class="va">prj</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">prjp</span> <span class="op">&lt;-</span> <span class="fu">proj_predict</span><span class="op">(</span><span class="va">prj</span>, .seed <span class="op">=</span> <span class="fl">7364</span><span class="op">)</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Juho Piironen, Markus Paasiniemi, Alejandro Catalina, Frank Weber, Osvaldo Martin, Aki Vehtari.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

